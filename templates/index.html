{{define "Index"}}
{{template "_head"}}
{{template "_menu"}}


   <body>
      <div class="container">
         <section class="card">
            <div>
               <table class="table table-striped table-hover mb-0">
                  <thead>
                     <tr>
                        <th>Nome</th>
                        <th>Descrição</th>
                        <th>Preço</th>
                        <th>Quantidade</th>
                     </tr>
                  </thead>
                  <tbody>
                     {{range .}}
                     <tr>
                        <td>{{.Nome}}</td>
                        <td>{{.Descricao}}</td>
                        <td>{{.Preco}}</td>
                        <td>{{.Quantidade}}</td>
                        <td>
                           <button
                              type="button"
                              class="btn btn-danger"
                              data-bs-toggle="modal"
                              data-bs-target="#exampleModal{{.Id}}"
                           >
                              Excluir
                           </button>
                        </td>

                        <div
                           class="modal fade"
                           id="exampleModal{{.Id}}"
                           tabindex="-1"
                           aria-labelledby="exampleModalLabel"
                           aria-hidden="true"
                        >
                           <div class="modal-dialog">
                              <div class="modal-content">
                                 <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel{{.Id}}">
                                       Confirmação de Exclusão
                                    </h5>
                                    <button
                                       type="button"
                                       class="btn-close"
                                       data-bs-dismiss="modal"
                                       aria-label="Close"
                                    ></button>
                                 </div>
                                 <div class="modal-body">
                                    <p>Tem certeza que deseja excluir o produto?</p>
                                 </div>
                                 <div class="modal-footer">
                                    <button
                                       type="button"
                                       class="btn btn-secondary"
                                       data-bs-dismiss="modal"
                                    >
                                       Voltar
                                    </button>
                                    <!-- <button onclick="onDelete('{{.Id}}')" class="btn btn-danger">Deletar</button> -->
                                    <button
                                       type="button"
                                       onclick="onDelete('{{.Id}}')"
                                       class="btn btn-danger"
                                       id="excluir{{.Id}}"
                                    >
                                       Deletar
                                    </button>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </tr>
                     {{end}}
                  </tbody>
               </table>
            </div>
         </section>
         <div class="card-footer">
            <a href="/new" class="btn btn-primary mb-2">Criar novo produto</a>
         </div>
      </div>
   </body>
   <script>
      function onDelete(idProduto) {
         window.location = '/delete?id=' + idProduto;
      }
   </script>
</html>
{{end}}
